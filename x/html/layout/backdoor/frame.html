<!DOCTYPE html>
<html>
	<head>
		{if $TPL_EXISTS && $Xtra != '' AND $method  != '' AND ($Xtra != 'index')}
			{include file="$Door/$Xtra/$method.html" assign=XTRA_METHOD}	
			{$HTML.BODY.HTML = $XTRA_METHOD}
		{else if $HTML.BODY.HTML == ''}
			{include file="$Door/portal.html" assign=PORTAL}
			{$HTML.BODY.HTML = $PORTAL}
		{/if}
		<title>{$HTML.HEAD.TITLE}{$Xtra}:{$method}</title>
		
		{* TODO: Make a min & compress file for all css *}
		{if $HTML.HEAD.CSS != ''}
		<link rel="stylesheet" type="text/css" href="{$HTML.HEAD.CSS}">
		{/if} 

		{if $HTML.HEAD.JS != ''}
		<SCRIPT src="{$HTML.HEAD.JS}"></SCRIPT>
		{/IF} 

		<STYLE TYPE="text/css">
			{* Build CSS Based from DB Info *}
			{FOREACH from=$HTML.HEAD.STYLE item=style}
				{$style.element}{if $style.state != "" && $style.state != " "}:{$style.state}{/if}{
				{FOREACH from=$style.attr item=attr}
				{$attr.key} : {$attr.value};
				{/FOREACH}
			}
			{/FOREACH}

			html, body{
				background : rgb(109,179,242); /* Old browsers */
				/* IE9 SVG, needs conditional override of 'filter' to 'none' */
				background : url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzZkYjNmMiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjE5JSIgc3RvcC1jb2xvcj0iIzU0YTNlZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjYwJSIgc3RvcC1jb2xvcj0iIzM2OTBmMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxZTY5ZGUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
				background : -moz-linear-gradient(left,  rgba(109,179,242,1) 0%, rgba(84,163,238,1) 19%, rgba(54,144,240,1) 60%, rgba(30,105,222,1) 100%); /* FF3.6+ */
				background : -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(109,179,242,1)), color-stop(19%,rgba(84,163,238,1)), color-stop(60%,rgba(54,144,240,1)), color-stop(100%,rgba(30,105,222,1))); /* Chrome,Safari4+ */
				background : -webkit-linear-gradient(left,  rgba(109,179,242,1) 0%,rgba(84,163,238,1) 19%,rgba(54,144,240,1) 60%,rgba(30,105,222,1) 100%); /* Chrome10+,Safari5.1+ */
				background : -o-linear-gradient(left,  rgba(109,179,242,1) 0%,rgba(84,163,238,1) 19%,rgba(54,144,240,1) 60%,rgba(30,105,222,1) 100%); /* Opera 11.10+ */
				background : -ms-linear-gradient(left,  rgba(109,179,242,1) 0%,rgba(84,163,238,1) 19%,rgba(54,144,240,1) 60%,rgba(30,105,222,1) 100%); /* IE10+ */
				background : linear-gradient(to right,  rgba(109,179,242,1) 0%,rgba(84,163,238,1) 19%,rgba(54,144,240,1) 60%,rgba(30,105,222,1) 100%); /* W3C */
				filter     : progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=1 ); /* IE6-8 */ 
			}

			.transparent-black-25{
				background-color: rgba(0,0,0,0.25);
			}
			.transparent-black-50{
				background-color: rgba(0,0,0,0.55);
			}
			.transparent-black-75{
				background-color: rgba(0,0,0,0.75);
			}
			.transparent-black-90{
				background-color: rgba(0,0,0,0.90);
			} 
			</STYLE>
			<link href='http://fonts.googleapis.com/css?family=Geo|Righteous|Allerta' rel='stylesheet' type='text/css'>
	</head>

	<body onload=""> 
		<div class="loader" style="background-image: url(/bin/images/loading/axis_invert.png); background-position: center center; text-align: center;">
			 <img src="{$thumb}w=200&q=100&src=/bin/images/logos/sdx.png" style="position: absolute; top: 39px; right: 0px;">
			 <!-- <progress>Loading...</progress> -->
		</div>

	{if $HTML.BODY.CSS != ''}
		<link rel="stylesheet" type="text/css" href="{$HTML.BODY.CSS}">
	{/if}
		
	{if $HTML.BODY.JS != ''}
		<!-- script src="{$HTML.BODY.JS}"></script -->
	{/if}  

	<style type="text/css"> 
		/*
			Loader Image and Animation 
		*/
		@-webkit-keyframes loaderSprite {
		    from { background-position: 0px; }
		    to { background-position: -2500px; }
		}

		@-moz-keyframes loaderSprite {
		    from { background-position: 0px; }
		    to { background-position: -2500px; }
		}

		@keyframes loaderSprite {
		    from { background-position: 0px; }
		    to { background-position: -2500px; }
		}

		.loader {
		    width             : 100px;
			height            : 100px;
			top : 46%;
			left: 46%;
			position          : absolute;
			z-index           : 99999999999999999;
			background-image  : url("/bin/images/loading/axis.png");
			-webkit-animation: loaderSprite 0.625s steps(25, end) infinite;
			-moz-animation: loaderSprite 0.625s steps(25, end) infinite;
			animation: loaderSprite 0.625s steps(25, end) infinite;
		}

		.loader progress{
			position         : absolute;
			bottom           : 0;
			right : 10px;
			height: 5px;
			width            : 180px;
		}

		/* END Loader IMG*/ 

		/* START DOM BUTTONS */
		#dombar {
			position   : absolute;
			left       : 0;
			bottom     : 70px; 
			width      : 100%;
			margin     : 0;
			padding    : 0;
			z-index    : 3;
			background : black;
			display    : inline-block;
			text-align : center;
			/* It takes up the whole bar, but we need to keep it hidden..*/
			height     : 0px;	
			display    :   none;
		}  

		#dom-cuts{
			text-align : center;  
			height     : 70px;
			margin     : 0;
			position   : absolute;
			bottom     : 0;
			padding    : 0;
		}

	 	#dom-cuts li, .ui-dom-placeholder{
			position         : relative;
			bottom           : 0;
			background-color : rgb(56, 146, 211);
			background-image : none;
			box-shadow       : 0px -2px 2px rgba(0,0,0,0.25);
			text-align       : center;
			border-radius    : 100px 100px 0 0;
			/* -- transition is the magic sauce for animation -- */
			height           : 70px;
			width            : 100px; 
			display          : inline-block;
			padding          : 15px 0 0 0;
			margin           : 0 0px 0 5px;
			z-index          : 3;
			float: left;
	 	}

	 	#trash-bin {
			position : absolute !important;
			right    : 0;
			bottom   : 0;
			z-index  : 3;
	 	}

	 	#dom-cuts li a{
			display     : block;
			width       : 100px;
			height      : 70px;
			padding-top : 15px;
	 	}

 
	 	#dom-cuts li:hover, .trash-bin-hover{
			box-shadow : 0 0 25px rgb(56, 146, 211), inset 0px 10px 12px rgba(134,234,255,1),inset -5px 5px 10px rgba(0,0,0,.25); 
			height     : 100px;  
			top        : -30px;

	 	}

	 	.trash-bin-active{ 
			background: rgba(255,255,255,0.85);
	 	}

	 	 


	 	#dom-cuts li{ 
			padding : 0px;
			right   : 0;

	 	}

	 	.trash-bin-active a{
			/*height     : 220px;*/
			/*background : transparent;*/
	 	} 
	</style> 

	<div id="dombar">
		<!-- Admin Buttons --> 
		<ul id="dom-cuts" class="connectDomCuts"> 
			<li id="dummy-drop-cut" style="display: none; float: left; background-repeat: no-repeat; background-position: center;" class="i_animate dontSort">  
			</li>

			{foreach $axis_bar as $k => $v}
				{if $v.toolbar == true}
			<li id="{$v.link|replace:'/':'-'}-{$v.id}" class="i_animate">  
				<a href="#/{$toBackDoor}/{$v.link}" onclick="$('#zyx-content').html('')" >
					<!-- <br/>{$v.name}<br/> -->
					<img align="absmiddle" src="{$ICON.48}{$v.icon}"/>
				</a>	
			</li>
				{/if}
			{/foreach}


			<li id="trash-bin" class="i_animate dontSort" style="display: none;"> 
				<a href="#" > 
					<!-- <br/>Toos -->
					<img  align="absmiddle" src="{$ICON.48}trash_full.png" width="48" /> 
				</a>	
			</li>

			<li id="www-map" class="i_animate dontSort">  
				<a href="#/{$toBackDoor}/wwwSetup/worldmap"  >
					<!-- <br/>Map<br/> -->
					<img  align="absmiddle" src="{$thumb}h=48&q=100&zc=1&src={$ICON.48}Map.png"/>
				</a>	
			</li>
			<li id="key-axis"  class="i_animate dontSort">   
				<a href="#/{$toBackDoor}/"  > 
					<!-- <br/>@xis<br/> -->
					<img  align="absmiddle"  src="{$thumb}h=48&q=100&zc=1&src={$ICON.256}Login.png"/><br/> 
				</a>	
			</li> 
			<li id="pad-lock" class="i_animate dontSort"> 
				<a href="#/{$toBackDoor}/login/logout" rel="logout">
					<!-- <br/>Lock -->
					<img  align="absmiddle" src="{$thumb}h=48&q=100&zc=1&src={$ICON.256}Logout.png" width="48" />
				</a>	
			</li>
		</ul> 
	</div>



<style type="text/css">

 	/* END DOM BUTTONS */ 
 	.i_animate{
 		-o-transition               : all .35s linear;
		-ms-transition              : all .35s linear;
		-moz-transition             : all .35s linear;
		-webkit-transition          : all .35s linear;
		transition                  : all .35s linear;
 	}  

	#no-desktop{
		width  : 100%;
		height : 100%;
	}

	/*@import url(http://fonts.googleapis.com/css?family=Geo|Righteous|Allerta);*/

	#zyx-content:first-child {
			box-shadow    : 1px 0px 100px rgba(0,0,0,.85);
			background    : rgba(0,0,0,0.55);
			border        : 1px solid rgba(255,255,255,.35);
			padding       : 10px;
			color         : white;
			border-radius : 25px;
			color         : rgba(255,255,255,0.90);
			font-family: 'Geo', sans-serif;
 	}


	/* -- X axis rotation for click panel -- */
	/********************************************************************************/

		

	/* punch
	*******************************************************************************/
	button.punch {
		background              : #33dd0b;
		border-top              : 1px solid #38538c;
		border-right            : 1px solid #1f2d4d;
		border-bottom           : 1px solid #151e33;
		border-left             : 1px solid #1f2d4d;
		-moz-border-radius      : 4px;
		-webkit-border-radius   : 4px;
		border-radius           : 100px;
		-moz-box-shadow         : inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		-webkit-box-shadow      : inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		box-shadow              : inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		color                   : #fff;
		font-family             : "helvetica neue", helvetica, arial, sans-serif;
		font-size               : 20px;
		font-weight             : bold;
		line-height             : 1;
		margin-bottom           : 10px;
		padding                 : 10px 10px 12px 10px;
		text-align              : center;
		text-shadow             : 0px -1px 1px #1e2d4d;
		width                   : 75px;
		height                  : 75px;
		-webkit-background-clip : padding-box; 
	}

	button.punch:hover {
		-moz-box-shadow    : inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		-webkit-box-shadow : inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		box-shadow         : inset 0 0px 20px 1px #87adff, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		cursor             : pointer;
	}

	button.punch:active {
		-moz-box-shadow    : inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111;
		-webkit-box-shadow : inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111;
		box-shadow         : inset 0 1px 10px 1px #5c8bee, 0 1px 0 #1d2c4d, 0 2px 0 #1f3053, 0 4px 3px 0 #111;
		margin-bottom      : -11px;
	}

	button.punch {
		background              : #4162a8;
		border-top              : 1px solid #38538c;
		border-right            : 1px solid #1f2d4d;
		border-bottom           : 1px solid #151e33;
		border-left             : 1px solid #1f2d4d;
		-moz-border-radius      : 4px;
		-webkit-border-radius   : 4px;
		border-radius           : 100px;
		-moz-box-shadow         : inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		-webkit-box-shadow      : inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		box-shadow              : inset 0 1px 10px 1px #5c8bee, 0px 1px 0 #1d2c4d, 0 6px 0px #1f3053, 0 8px 4px 1px #111;
		color                   : #fff;
		font-family             : "helvetica neue", helvetica, arial, sans-serif;
		font-size               : 20px;
		font-weight             : bold;
		line-height             : 1;
		margin-bottom           : 10px;
		padding                 : 10px 10px 12px 10px;
		text-align              : center;
		text-shadow             : 0px -1px 1px #1e2d4d;
		width                   : 75px;
		height                  : 75px;
		-webkit-background-clip : padding-box;
		
		background              : rgb(96,108,136); /* Old browsers */
		/* IE9 SVG, needs conditional override of 'filter' to 'none' */
		background              : url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM2MDZjODgiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjM2Y0YzZiIiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
		background              : -moz-radial-gradient(center, ellipse cover,  rgba(96,108,136,1) 0%, rgba(63,76,107,1) 100%); /* FF3.6+ */
		background              : -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(96,108,136,1)), color-stop(100%,rgba(63,76,107,1))); /* Chrome,Safari4+ */
		background              : -webkit-radial-gradient(center, ellipse cover,  rgba(96,108,136,1) 0%,rgba(63,76,107,1) 100%); /* Chrome10+,Safari5.1+ */
		background              : -o-radial-gradient(center, ellipse cover,  rgba(96,108,136,1) 0%,rgba(63,76,107,1) 100%); /* Opera 12+ */
		background              : -ms-radial-gradient(center, ellipse cover,  rgba(96,108,136,1) 0%,rgba(63,76,107,1) 100%); /* IE10+ */
		background              : radial-gradient(ellipse at center,  rgba(96,108,136,1) 0%,rgba(63,76,107,1) 100%); /* W3C */
		filter                  : progid:DXImageTransform.Microsoft.gradient( startColorstr='#606c88', endColorstr='#3f4c6b',GradientType=1 ); /* IE6-8 fallback on horizontal gradient */

	}

	button.punch:hover {
		-moz-box-shadow    : inset 0 0px 20px 1px #87adff, 0px 1px 0 rgba(73,155,234,0.5), 0 6px 0px rgba(73,155,234,0.5), 0 8px 4px 1px #111;
		-webkit-box-shadow : inset 0 0px 20px 1px #87adff, 0px 1px 0 rgba(73,155,234,0.5), 0 6px 0px rgba(73,155,234,0.5), 0 8px 4px 1px #111;
		box-shadow         : inset 0 0px 20px 1px #87adff, 0px 1px 0 rgba(73,155,234,0.5), 0 6px 0px rgba(73,155,234,0.5), 0 8px 4px 1px #111;
		
		background         : rgba(73,155,234,0.5); /* Old browsers */
		/* IE9 SVG, needs conditional override of 'filter' to 'none' */
		background         : url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM0OTliZWEiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMjA3Y2U1IiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
		background         : -moz-radial-gradient(center, ellipse cover,  rgba(73,155,234,1) 0%, rgba(32,124,229,1) 100%); /* FF3.6+ */
		background         : -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(73,155,234,1)), color-stop(100%,rgba(32,124,229,1))); /* Chrome,Safari4+ */
		background         : -webkit-radial-gradient(center, ellipse cover,  rgba(73,155,234,1) 0%,rgba(32,124,229,1) 100%); /* Chrome10+,Safari5.1+ */
		background         : -o-radial-gradient(center, ellipse cover,  rgba(73,155,234,1) 0%,rgba(32,124,229,1) 100%); /* Opera 12+ */
		background         : -ms-radial-gradient(center, ellipse cover,  rgba(73,155,234,1) 0%,rgba(32,124,229,1) 100%); /* IE10+ */
		background         : radial-gradient(ellipse at center,  rgba(73,155,234,1) 0%,rgba(32,124,229,1) 100%); /* W3C */
		filter             : progid:DXImageTransform.Microsoft.gradient( startColorstr='#499bea', endColorstr='#207ce5',GradientType=1 ); /* IE6-8 fallback on horizontal gradient */
		
		
		cursor             : pointer;
	}

	button.punch:active {
		-moz-box-shadow    : inset 0 1px 10px 1px #5c8bee, 0 1px 0 rgba(73,155,234,0.5), 0 2px 0 rgba(73,155,234,0.5), 0 4px 3px 0 #111;
		-webkit-box-shadow : inset 0 1px 10px 1px #5c8bee, 0 1px 0 rgba(73,155,234,0.5), 0 2px 0 rgba(73,155,234,0.5), 0 4px 3px 0 #111;
		box-shadow         : inset 0 1px 10px 1px #5c8bee, 0 1px 0 rgba(73,155,234,0.5), 0 2px 0 rgba(73,155,234,0.5), 0 4px 3px 0 #111;
		margin-top         : 11px;
	}

	</style> 
	<!-- JAVASCRIPTS -->
	<script type="text/javascript" src="/bin/js/ext-4.2.1/examples/shared/include-ext.js"></script>
    <script type="text/javascript" src="/x/html/layout/backdoor/shared/options-toolbar.js"></script>
	<!-- <script type="text/javascript" src="/fileServer/js/jq/jquery.min.js"></script>  -->
	<script type="text/javascript" src="/fileServer/js/ux/modernizr-latest.js"></script>
	<!-- // <script type="text/javascript" src="/fileServer/js/jq/jquery-latest.pack.js"></script> -->
	<script type="text/javascript" src="/fileServer/js/jq/jquery.min.js"></script>
	<!-- <script type="text/javascript" src="/fileServer/js/jq/jquery.ba-hashchange.min.js"></script> --> 
	<script type="text/javascript" src="/fileServer/js/jq/jquery-ui.js"></script> 
	<script type="text/javascript" src="/fileServer/js/jq/jquery.history.js"></script>
	<script type="text/javascript">
		// Establish Variables
		var State = History.getState();
			//$log = $('#log');

		// Log Initial State
		History.log('initial:', State.data, State.title, State.url);

    	// Bind to State Change
		History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
			// Log the State
			State = History.getState(); // Note: We are using History.getState() instead of event.state
			x4.loadZyx(State.url.replace(location.origin+location.toBackDoor,''));	
			History.log('statechange:', State.data, State.title, State.url);
		});

		window.onhashchange = function(argument) {
			// Hash change event fired.
		};

	</script> 
	<link href="/fileServer/css/{$HTTP_HOST}-icons.css" rel="stylesheet" type="text/css"/>
	<link href="/x/html/layout/backdoor/desktop/css/desktop.css" rel="stylesheet" type="text/css"/>
		
	<script type="text/javascript">
	 


		(function($){
			$.fn.center = function(parent,direction,margin,percent) { 
				var p = parent, percent = (percent) ? percent/100 : 1;
				switch(typeof parent){
					case(typeof {}):
						parent = $(parent);
					break;
					case(typeof true):
						parent = $(window);
					break;
					case(typeof ""):
						parent = ($("#"+parent).length) ? $("#"+parent) : $("."+parent);
					break;
					default: 
						parent = $(this).parent();
					break;
				}

				var css = {
					position : 'absolute',
					top      : Math.max(0, ( ( parent.height() - this.height() ) / 2) + 
						parent.scrollTop()) + "px",
					left     : Math.max(0, ((parent.width() - this.width()) / 2) + 
						parent.scrollLeft()) + "px"
				}; 

				if(typeof direction != 'undefined'){
					dir = direction.split(''); 
					for (var i = 0; i <=  dir.length - 1; i++) { 
						switch(dir[i]){
							case('t'):
								css.top = parent.height() - (parent.height() * percent) + margin;
							break;
							case('b'):
								css.top = (parent.height() - this.height() ) * percent  - margin;
							break;
							case('r'):
								css.left = (parent.width() - this.width()) * percent  - margin;
							break; 
							case('l'): 
								css.left = parent.width() - ( parent.width() * percent ) + margin;
							break; 
						}

						

						console.log(this.attr('src') + ':'+ dir[i]+':top:'+this.css('top')+':left:'+this.css('left'));
					}; 
				}  


				this.css(css); 


				return this;
			}

			// $('#dom-cuts').center();

		    // $.fn.disableSelection = function() {
		    //     return this
		    //     .attr('unselectable', 'on')
		    //     .css('user-select', 'none')
		    //     .css('-moz-user-select', 'none')
		    //     .css('-khtml-user-select', 'none')
		    //     .css('-webkit-user-select', 'none')
		    //     .on('selectstart', false)
		    //     .on('contextmenu', false)
		    //     .on('keydown', false)
		    //     .on('mousedown', false);
		    // };
		 
		    // $.fn.enableSelection = function() {
		    //     return this
		    //     .attr('unselectable', '')
		    //     .css('user-select', '')
		    //     .css('-moz-user-select', '')
		    //     .css('-khtml-user-select', '')
		    //     .css('-webkit-user-select', '')
		    //     .off('selectstart', false)
		    //     .off('contextmenu', false)
		    //     .off('keydown', false)
		    //     .off('mousedown', false);
		    // };
		 
		})(jQuery);

		//$('#dom-cuts img').disableSelection();

        Ext.Loader.setPath({
			'Ext.ux.desktop' : '/x/html/layout/backdoor/desktop/js',
			MyDesktop        : '/x/html/layout/backdoor/desktop',
			'Ext.ux'         : '/bin/js/ext-4.2.1/examples/ux/',
			'Ext.app'        : '/bin/js/ext-4.2.1/examples/portal/classes/'
        });

         Ext.require([
            'Ext.Viewport',
            'Ext.data.JsonStore',
            'Ext.tip.QuickTipManager',
            'Ext.tab.Panel',
            'Ext.ux.GroupTabPanel',
            'Ext.grid.*',
            'Ext.app.PortalColumn',
            'Ext.app.PortalDropZone',
            'Ext.app.Portlet',
            'Ext.app.GridPortlet',
            'Ext.app.PortalPanel',
            'Ext.app.ChartPortlet'
        ]);
       	
       	//Ext.require('MyDesktop.App');
		{include file="layout/backdoor/desktop/App.js"}

        var myDesktopApp; 
        
        {$HTML.JSAN}
		</script>
		<script src="/fileServer/js/x4/x4.js"></script>
		<script src="/fileServer/js/x4/ume.js"></script>
		<script type="text/javascript">
	        Ext.onReady(function () { 
	        	x4.direct('xWwwSetup');
				location.toBackDoor = "/{$toBackDoor}/";
	        	myDesktopApp = new MyDesktop.App();  
	        });    
		</script>
		
	</body>

</html>